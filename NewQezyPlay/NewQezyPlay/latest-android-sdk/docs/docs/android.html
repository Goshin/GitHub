<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC  "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <!--File AUTOGENERATED by octoshape.octodoc2.Xod2Html, please DO NOT MODIFY IT.-->
  <head>
    <title>Android SDK Documentation</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <style media="screen" type="text/css"><!--

body {
	margin:0;
	padding-top:20px;
	padding-bottom:20px;
	padding-left:0px;
	padding-right:0px;
	font-family: tahoma, helvetica, sans-serif;
	background-color: #000000;
	font-size: 12px;
	text-align: center;
}

div#content {
  position: relative; 
	text-align: left;
	margin-right: auto;
	margin-left: auto;
	width: 770px;
	overflow: visible;
	padding: 10px;
	border-left: 1px solid #999999;
	background-color: #FFFFFF;
}

div.vbar {
  padding-right: 2px;
  border-right: #DC143C 5px solid;
}

div.warningbox {
  font-style: italic;
  color: #600;
  border: 1px solid #900;
  background-color: #FFF8E0;
  padding: 0pt 1em;
}

div.remark  {
  border: 1px solid #0A4;
  padding: 7px;
}

a {
	color: #2222CE ;
	text-decoration: underline;
}
a:visited {
  color: #663399
}
#TOC a, #TOC a:visited {
	color: #5555CE ;
  text-decoration: none;
}

h1{
	text-align: center;
	margin-top: 18px;
	margin-bottom: 40px;
	color: #000000;
	font-weight: normal;
	font-size: 22px;
}

h2{
	margin-top: 18px;
	margin-bottom: 12px;
	color: #666666;
	font-weight: bold;
	font-size: 16px;
}

h3 {
  margin-top: 16px;
  margin-bottom: 11px;
  color: #666666;
  font-weight: bold;
  font-size: 14px;
}

h4 {
  margin-top: 14px;
	margin-bottom: 10px;
	color: #666666;
	font-weight: bold;
	font-size: 12px;
}

h5 {
  margin-top: 10px;
	margin-bottom: 10px;
	color: #666666;
	font-weight: bold;
	font-style: italic;
	font-size: 12px;
}

h6 {
  margin-top: 10px;
	margin-bottom: 10px;
	color: #666666;
	font-weight: bold;
	font-style: italic;
	font-size: 12px;
}

p {
  margin-top: 10px;
  margin-bottom: 10px;
}

table {
  
	font-size: inherit;
}

ol, ul {
  margin-bottom: 0px;
  margin-top: 0px;
  padding-left: 0px;
  margin-left: 20px;
}

dl {
  margin-bottom: 0px;
  margin-top: 0px;
}

dd {
    padding-left: 0px;
    margin-left: 20px;
}

li {
	padding-top: 3px;
}

.compact > li {
  padding: 0.55px;
} 

dt {
  font-weight: bold;
  color: #444444;
}

li > p, li > p + ol, li > p + ul, li > p + dl {
  margin-top: 0px;
  margin-bottom: 0px;
}

dd > p, dd > p + ol, dd > p + ul, dd > p + dl {
  margin-top: 3px;
  margin-bottom: 3px;
}

p + ol, p + ul, p + dl {
 margin-top: -8px;
}

#versionline {font-size:12px; margin-bottom:12px; margin-top:2px; }

pre{
	background-color: #EFF8FF;
	border: 1px dashed #629CCE;
	padding: 10px;
	overflow: auto;
	vertical-align: top;
}

pre.transcript i {
  color: #090;
}

table.octotable {
  background-color: #FAFEFF ;
  margin: 1ex auto ;
  padding: 0px ;
  border-collapse: collapse ;
}
table.octotable th {
  font-weight: bold;
  text-align: center;
  color: #222244;
  padding: 0.6ex;
  border: 1px solid #629CCE;
  background-color: #EFF8FF;
}
table.octotable th .smaller {
  font-weight: normal ;
  font-size: smaller ;
}
table.octotable td {
  padding: 0.6ex;
  border: 1px solid #99BBCE;
}





span.distribution, span.audience, span.topic {
  padding: 3px 5px;
  font-weight: bold;
  color: #FFF;
}
span.distribution { background-color: #C09; }
span.audience     { background-color: #06C; }
span.topic        { background-color: #390; }

p.octodoc-marginal {
  position: absolute ;
  left: -407px;
  width: 400px;
  margin-top: 0px;
  line-height: 24px;
  text-align: right;
  white-space: pre-line;
}

h1 + p.octodoc-marginal { top: 7px; }
h2 + p.octodoc-marginal { margin-top: -30px; }
h3 + p.octodoc-marginal { margin-top: -27px; }
h4 + p.octodoc-marginal { margin-top: -24px; }
h5 + p.octodoc-marginal { margin-top: -24px; }
h6 + p.octodoc-marginal { margin-top: -24px; }



.i-for-octotag i {
  font-style: normal; padding: 0px 0.3ex; background-color: #EEE;
  line-height: 1.33;
}
.i-for-octotag i.D { background-color: #FCD; }
.i-for-octotag i.A { background-color: #CDF; }
.i-for-octotag i.T { background-color: #DFC; }





p.marginal-note, p.todo {
  position: absolute ;
  right: -225px;
  width: 200px;
  margin-top: 0px;
  padding: 7px;
  font-family: tahoma, helvetica, sans-serif;
  white-space: normal;
}
p.marginal-note {
  background-color: #FEC;
  border: 1px solid #C60;
}
.todo {
  background-color: #F8F8FF;
  border: 1px solid #0A4;
}
.todo b {
  color: #C00;
}

.todo.inline, li.todo {
  position: static ;
  width: auto ;
}

.plainTitle {
  font-weight: normal;
}





--></style>
    <style media="print" type="text/css"><!--

body {
	margin:0;
	padding-top:20px;
	padding-bottom:20px;
	padding-left:0px;
	padding-right:0px;
	font-family: tahoma, helvetica, sans-serif;
	font-size: 12px;
	text-align: left;
	margin-right: auto;
	margin-left: auto;
	padding: 10px;
	border-left: 1px solid #999999;
	background-color: #FFFFFF;
}

div#content.columns {
	-webkit-column-count: 2;
    -moz-column-count: 2;
	column-count: 2;
}

div.vbar {
}

div.warningbox {
  font-style: italic;
  color: #600;
  border: 1px solid #900;
  background-color: #FFF8E0;
  padding: 0pt 1em;
}

div.remark  {
  border: 1px solid #0A4;
  padding: 7px;
}

a {
	color: #2222CE ;
	text-decoration: underline;
}
a:visited {
  color: #663399
}
#TOC a, #TOC a:visited {
	color: #5555CE ;
  text-decoration: none;
}

h1{
	text-align: center;
	margin-top: 18px;
	margin-bottom: 40px;
	color: #000000;
	font-weight: normal;
	font-size: 22px;
}

h2{
	margin-top: 18px;
	margin-bottom: 12px;
	color: #666666;
	font-weight: bold;
	font-size: 16px;
}

h3 {
  margin-top: 16px;
  margin-bottom: 11px;
  color: #666666;
  font-weight: bold;
  font-size: 14px;
}

h4 {
  margin-top: 14px;
	margin-bottom: 10px;
	color: #666666;
	font-weight: bold;
	font-size: 12px;
}

h5 {
  margin-top: 10px;
	margin-bottom: 10px;
	color: #666666;
	font-weight: bold;
	font-style: italic;
	font-size: 12px;
}

h6 {
  margin-top: 10px;
	margin-bottom: 10px;
	color: #666666;
	font-weight: bold;
	font-style: italic;
	font-size: 12px;
}

p {
  margin-top: 10px;
  margin-bottom: 10px;
}

table {
  
	font-size: inherit;
}

ol, ul {
  margin-bottom: 0px;
  margin-top: 0px;
  padding-left: 0px;
  margin-left: 20px;
}

dl {
  margin-bottom: 0px;
  margin-top: 0px;
}

dd {
    padding-left: 0px;
    margin-left: 20px;
}

li {
	padding-top: 3px;
}

.compact > li {
  padding: 0.55px;
} 

dt {
  font-weight: bold;
  color: #444444;
}

li > p, li > p + ol, li > p + ul, li > p + dl {
  margin-top: 0px;
  margin-bottom: 0px;
}

dd > p, dd > p + ol, dd > p + ul, dd > p + dl {
  margin-top: 3px;
  margin-bottom: 3px;
}

p + ol, p + ul, p + dl {
 margin-top: -8px;
}

#versionline {font-size:12px; margin-bottom:12px; margin-top:2px; }

pre{
	background-color: #EFF8FF;
	border: 1px dashed #629CCE;
	padding: 10px;
	overflow: auto
	vertical-align: top;
}

pre.transcript i {
  color: #090;
}

table.octotable {
  background-color: #FAFEFF ;
  margin: 1ex auto ;
  padding: 0px ;
  border-collapse: collapse ;
}
table.octotable th {
  font-weight: bold;
  text-align: center;
  color: #222244;
  padding: 0.6ex;
  border: 1px solid #629CCE;
  background-color: #EFF8FF;
}
table.octotable th .smaller {
  font-weight: normal ;
  font-size: smaller ;
}
table.octotable td {
  padding: 0.6ex;
  border: 1px solid #99BBCE;
}





span.distribution, span.audience, span.topic {
  padding: 3px 5px;
  font-weight: bold;
  color: #FFF;
}
span.distribution { background-color: #C09; }
span.audience     { background-color: #06C; }
span.topic        { background-color: #390; }

p.octodoc-marginal {
  position: absolute ;
  left: -407px;
  width: 400px;
  margin-top: 0px;
  line-height: 24px;
  text-align: right;
  white-space: pre-line;
}

h1 + p.octodoc-marginal { top: 7px; }
h2 + p.octodoc-marginal { margin-top: -30px; }
h3 + p.octodoc-marginal { margin-top: -27px; }
h4 + p.octodoc-marginal { margin-top: -24px; }
h5 + p.octodoc-marginal { margin-top: -24px; }
h6 + p.octodoc-marginal { margin-top: -24px; }



.i-for-octotag i {
  font-style: normal; padding: 0px 0.3ex; background-color: #EEE;
  line-height: 1.33;
}
.i-for-octotag i.D { background-color: #FCD; }
.i-for-octotag i.A { background-color: #CDF; }
.i-for-octotag i.T { background-color: #DFC; }





p.marginal-note, p.todo {
  position: static ;
  right: -225px;
  width: auto;
  margin-top: 0px;
  padding: 7px;
  font-family: tahoma, helvetica, sans-serif;
  white-space: normal;
}
p.marginal-note {
  background-color: #FEC;
  border: 1px solid #C60;
}
.todo {
  background-color: #F8F8FF;
  border: 1px solid #0A4;
}
.todo b {
  color: #C00;
}

.todo.inline, li.todo {
  position: static ;
  width: auto ;
}

.plainTitle {
  font-weight: normal;
}





--></style>
  </head><body>
<div id="content">

<h1 id="android-AndroidDocumentation">Android SDK Documentation</h1>
<p class="marginal-note">Version <span>1410300@v326</span></p>
<p>The Octoshape SDK provides parts of the Octoshape content
			delivery system on the Android platform, enabling developers to
			create applications with instant access to on-demand HD quality video
			and instant seek capabilities providing an unparalleled viewing
			experience. 
</p>
<p>The intention of this document is to provide Android
			application developers with the necessary information and reference,
			for integrating the live and on-demand content delivery system provided by
			Octoshape into Android applications. The Android SDK contains the
			following:
</p><ul>
  <li>
    <p>This introduction document, containing tutorials and
				examples.</p>
  </li><li>
    <p>The API documentation as HTML (<a href="javadoc/index.html">javadoc/index.html</a>).</p>
  </li><li>
    <p>Source Code for <a href="../../reference_players/">Reference Players</a> .</p>
  </li><li>
    <p>The JAR files containing the API (<a href="../../OctoAndroidLib/libs/">/OctoAndroidLib/libs</a>)</p>
  </li><li>
    <p>An Android Library Eclipse Project (<a href="../../OctoAndroidLib/">/OctoAndroidLib</a>)</p>
  </li>
</ul><div id="TOC">
<!--TOC auto-generated by octoshape.octodoc2.Xod2Html-->

<h2>Table of Contents</h2>
<p><a href="#android-1703914554-0">1. Introduction</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android-architecture">1.1. Octoshape SDK Architecture</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android-media_formats">1.2. Supported Media / Streaming Formats</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android-devices">1.3. Supported devices:</a><br/><a href="#android-installation">2. Using the SDK and Getting Started</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android--254385688-0">2.1. Setting-up a new project:</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android-1334376458-0">2.2. Importing the SDK reference applications:</a><br/><a href="#android-playing_streams">3. Playing Octoshape streams</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android-octoshapesystem">3.1. Creating and configuring OctoshapeSystem</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android-preparestreams">3.2. Prepare your streams by setting up a number of StreamPlayer instances</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android--390208488-0">3.3. Requesting playback and receiving URLs through callbacks</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android-android_playback">3.4. Playing an URL using the Android MediaPlayer</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android-errorhandling">3.5. Handling errors</a><br/>&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;<a href="#android--572716223-0">3.5.1. Handling MediaPlayer Errors</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android-multiple_players">3.6. Supporting multiple players</a><br/>&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;<a href="#android-1243832602-0">3.6.1. Selecting a player</a><br/>&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;<a href="#android--688059772-0">3.6.1.1. Playback using the Android MediaPlayer</a><br/>&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;<a href="#android--2125143792-0">3.6.2. Playback using the Adobe FlashPlayer</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android-seeking">3.7. Seeking for on-demand streaming</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android-dvr">3.8. DVR for live streaming</a><br/><a href="#android-691088623-0">4. Enabling remote playback using ChromeCast/Airplay</a><br/><a href="#android--1944429384-0">5. Ticket Restriction</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#ticket-system-top">5.1. Octoshape ticket system</a><br/>&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;<a href="#ticket-system-1703914554-1">5.1.1. Introduction</a><br/>&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;<a href="#ticket-system-1291314724-0">5.1.2. Octoshape stream configuration</a><br/>&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;<a href="#ticket-system-493783037-0">5.1.3. Issuing tickets</a><br/>&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;<a href="#ticket-system-authID">5.1.3.1. The authID</a><br/>&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;<a href="#ticket-system-authInfo">5.1.3.2. Setting options (the authInfo)</a><br/>&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;<a href="#ticket-system-authHash">5.1.3.3. Hash calculation</a><br/>&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;<a href="#ticket-system-authhashmd5">5.1.3.3.1. Algo 1 - MD5</a><br/>&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;<a href="#ticket-system-authhashhmacmd5">5.1.3.3.2. Algo 2 - HMAC-MD5</a><br/>&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;<a href="#ticket-system-authhashsha256">5.1.3.3.3. Algo 3 - SHA256</a><br/>&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;<a href="#ticket-system-authhashhmacsha256">5.1.3.3.4. Algo 4 - HMAC-SHA256</a><br/>&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;<a href="#ticket-system-authhashhmacsha256options">5.1.3.3.5. Adding extra options</a><br/>&nbsp;.&nbsp;&nbsp;&nbsp;.&nbsp;&nbsp;<a href="#ticket-system--1610279246-0">5.1.4. Octoshape client authorization</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android-ticket">5.2. Using tickets in the Android SDK</a><br/><a href="#android-broadcaster">6. Broadcasting live streams</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android-1583803543-0">6.1. Configuring the client</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android-782927444-0">6.2. Creating and configuring OctoshapeSystem</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android--1188379543-0">6.3. Prepare your broadcaster by setting up a number of StreamPushers</a><br/>&nbsp;.&nbsp;&nbsp;<a href="#android--1030046564-0">6.4. Querying the status of StreamPushers</a><br/><a href="#android-logging">7. Enable Logging</a><br/><a href="#android_appendixes-appendix_1">8. Appendix I: player.html used for embedding Flash</a><br/></p>
</div>

<h2 id="android-1703914554-0">1. Introduction</h2>
<p>As Octoshape only provides a content delivery (e.g., data
				stream), the SDK does not contain any media player itself, but only
				the mechanism to utilize the Octoshape content delivery system. This makes the
				development using the Octoshape SDK fairly straightforward; doing so
				is the same approach as for any other Android video playback
				application.</p>
<p>
				We currently support the following architectures:
</p><ul>
  <li>
    <p>armeabi-v6</p>
  </li><li>
    <p>armeabi-v7a</p>
  </li><li>
    <p>x86</p>
  </li>
</ul><p>
				From an application developer perspective the SDK allows retrieval of media data
				 ( e.g., <code>rtmp://127.0.0.1:60001/ond/Octoshape</code> ) from Octoshape streams 
				 ( e.g., <code>octoshape://streams.octoshape.net/androidsdk/mp4/nascar_500</code> ), and 
				 passing these to a media player. Moreover, the SDK API also 
				 provides streaming features such as: seeking (ond-demand only), DVR (live-only), ticketing and live broadcasting.
</p>

<h3 id="android-architecture">1.1. Octoshape SDK Architecture</h3>
<p>The SDK consists of two components the Java API,
					used by the application developer, and the Android Octoshape Service.
					The service is automatically launched and bound and only requiring adding it to the manifest file. 
					The service installs the Octoshape Client from the assets files
					and launches / stops it, as needed. Once started, the Octoshape Client will then directly 
					communicate with the application (see <a href="#android-sdk_overview">below figure</a>).
</p>
<p class="marginal-note">Figure 1: Overview of the Octoshape SDK components</p>
<p><img id="android-sdk_overview" src="img/SDK_architecture.svg"
            title="SDK Overview"/></p>

<h3 id="android-media_formats">1.2. Supported Media / Streaming Formats</h3>
<p>The SDK Octoshape supports the following streaming and
					media formats:
</p><ul>
  <li>
    <p><em>On-demand:</em> HTTP (hls, mp4, mp3), RTMP (flv)</p>
  </li><li>
    <p><em>Live:</em> HTTP (hls, mp3, ts), RTMP (flv)</p>
  </li>
</ul><p>
					As native Android playback capabilities are platform depended, we refer to the list of media formats for which Android
					offers built-in support ( <a
            href="http://developer.android.com/guide/appendix/media-formats.html#core">
						Android Developer Pages</a> ). Devices running Honeycomb (Android 3.x) or older, require a FlashPlayer or a 
						Vitamio plugin for playing live video.
</p>
<p>Moreover, there exists Android devices (e.g., STBs) with native media-frameworks supporting additional media 
				   formats and protocols (e.g, MPEG-TS over HTTP or HLS on Android 2.3). 
				   When targeting hardware with special media playback capabilities, different from those listed in the link above, 
				   please contact: support@octoshape.com.
</p><p>
					Here an overview of the standard android formats and protocols, which are supported by Octoshape:
</p><table class="octotable">
  <tr>
    <th></th>
    <th></th>
    <th>Froyo (2.2)</th>
    <th>Gingerbread (2.3)</th>
    <th>Honeycomb (3.2)</th>
    <th>Ice Cream Sandwich and Jelly Bean(4.0, 4.1, 4.2 and 4.3)</th>
  </tr><tr>
    <td>on-demand</td>
    <td>mp3</td>
    <td>x</td>
    <td>x</td>
    <td>x</td>
    <td>x</td>
  </tr><tr>
    <td> - || -</td>
    <td>mp4 (1)</td>
    <td>x</td>
    <td>x</td>
    <td>x</td>
    <td>x (3)</td>
  </tr><tr>
    <td> - || -</td>
    <td>flv</td>
    <td>x</td>
    <td>x</td>
    <td>x</td>
    <td>x (2)</td>
  </tr><tr>
    <td> - || -</td>
    <td>HLS</td>
    <td></td>
    <td></td>
    <td></td>
    <td>x</td>
  </tr><tr>
    <td>live</td>
    <td>mp3</td>
    <td>x</td>
    <td>x</td>
    <td>x</td>
    <td>x</td>
  </tr><tr>
    <td> - || -</td>
    <td>rtmp</td>
    <td>x</td>
    <td>x</td>
    <td>x</td>
    <td>x (2)</td>
  </tr><tr>
    <td> - || -</td>
    <td>HLS</td>
    <td></td>
    <td></td>
    <td></td>
    <td>x</td>
  </tr>
</table><dl>
  <dt><em>(1)</em></dt>
  <dd><p>
						mp4 media may contain H.264 AVC with either AAC or MP3 audio, and meet the following requirements:
    </p><ul>
      <li>
        <p>File does not use fragmented mp4 encoding
								(moof atoms)</p>
      </li><li>
        <p>The MP4 moov atom is located at the beginning
								of the file</p>
      </li>
    </ul><p>
						Again here we refer to the "Video Encoding
							Recommendations" on the  <a
            href="http://developer.android.com/guide/appendix/media-formats.html#core">Android Developer Pages</a>. 
    </p></dd>
  <dt><em>(2)</em></dt>
  <dd><p>
						On Android 4.x (ICS) flv media content is
							transmuxed and served as Http-Live-Streaming (hls).
    </p></dd>
  <dt><em>(3)</em></dt>
  <dd><p>
						On Android 4.x (ICS) mp4 media content is
							transmuxed and served as Http-Live-Streaming (hls).
    </p></dd>
</dl>

<h3 id="android-devices">1.3. Supported devices:</h3>
<p>The SDK currently supports Android 2.2, 2.3, 3.2, 4.0, 4.1, 4.2, 4.3, 4.4 (armv7a, armv6 and x86), and is tested on following devices:</p>
<ul>
  <li>
    <p>HTC Desire A8181 (Android 2.2)</p>
  </li><li>
    <p>HTC Desire Z A7272 (Android 2.3.3)</p>
  </li><li>
    <p>Samsung Galaxy Tab GT-P1000 (Android 2.3.3)</p>
  </li><li>
    <p>Samsung Galaxy GTI-9100 (Android 2.3.3)</p>
  </li><li>
    <p>Samsung Galaxy Tab 10.1 (Android 4.0)</p>
  </li><li>
    <p>Samsung Nexus Galaxy (Android 4.4)</p>
  </li><li>
    <p>Samsung S3 (Android 4.3)</p>
  </li><li>
    <p>Samsung S4 (Android 4.3)</p>
  </li><li>
    <p>Nexus 7 (Android 4.4.2)</p>
  </li>
</ul>

<h2 id="android-installation">2. Using the SDK and Getting Started</h2>
<p>
				It is recommended to use an Eclipse based IDE, as this allows direct import of the library and reference player projects.
</p>
<p>Importing the OctoshapeLibrary project (/OctoAndroidLib) into an Eclipse
				workspace (File&gt;Import) allow all Android projects to use the SDK by 
				referencing  to the library project <tt>OctoAndroidLib</tt> project.</p>

<h3 id="android--254385688-0">2.1. Setting-up a new project:</h3>
<ul>
  <li>
    <p>Import the Octoshape Library project (OctoAndroidLib) into
						the Eclipse workspace.</p>
  </li><li>
    <p>You may need to remove the auto-generated /src folder from the build path
						(Project&gt;Properties&gt;Java Build Path&gt;Source).</p>
  </li><li>
    <p>Create a new Android project.</p>
  </li><li>
    <p>Reference the OctoAndroidLib in your project as a library
						(&gt;Properties&gt;Android).</p>
  </li><li>
    <p>Add the JARs from /OctoAndroidLib/libs/ to your projects
						build path(&gt;Properties&gt;Java Build Path&gt; Add Jar)</p>
  </li><li>
    <p>Copy the /assets folder from the OctoAndroidLib project to
						your project. You may want to delete sub-directories
						in /assets/octoshape, each representing an CPU architecture, which 
						you don't target for. This reduces the application size.</p>
  </li><li>
    <p>Add the following node your projects manifest.xml, inside
						the &lt;application&gt; node:
    </p><pre>
&lt;service android:name="com.octoshape.android.service.StreamService" android:process=":OctoProc"/&gt; 
</pre>
    <p> For logging and development (allows calling <a href="javadoc/octoshape/android/client/OctoStatic.html"><code>OctoStatic.enableLog(enableLog(boolean toConsole, java.lang.String filePath))</code></a> add:</p>
    <pre>
&lt;service android:name="com.octoshape.android.service.StreamServiceDebug" android:process=":OctoProc"/&gt; 
</pre><p>
						as a child of &lt;application&gt; node
    </p></li><li>
    <p>Add INTERNET, ACCESS_NETWORK_STATE and WAKE_LOCK in the
						manifest by adding the following child to the &lt;manifest&gt; node:
    </p><pre>
&lt;uses-permission android:name="android.permission.INTERNET"/&gt;
&lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/&gt;
&lt;uses-permission android:name="android.permission.WAKE_LOCK"/&gt;
</pre></li>
</ul>

<h3 id="android-1334376458-0">2.2. Importing the SDK reference applications:</h3>
<p>The SDK includes three different reference applications. The first
					two exemplify the use of the SDK with the Adobe Flash Player
					(OctoFlashPlayer) and the Android MediaPlayer (OctoMediaPlayer),
					respectively. Both applications only implement a subset of the available SDK
					features. The third reference application
					(OctoDemoPlayer) is a 'full-fledged' production like implementation,
					using the Android MediaPlayer.</p>
<p>
					The reference applications are directly imported into the workspace, will all dependencies set, only requiring
					the presence of the library project and coping the asset folder from the library project to the reference application.
</p>

<h2 id="android-playing_streams">3. Playing Octoshape streams</h2>
<p>This chapter documents the retrival of a media URLs and how to pass these to the native Android media player. 
				The media URL is received by the folloing number of steps. 
</p><ul>
  <li>
    <p>creating and open the <a href="javadoc/octoshape/osa2/android/OctoshapeSystem.html"><code>OctoshapeSystem</code></a> object.
					This will launch the OctoshapeService, which installs and
					launches the Octoshape Client.</p>
  </li><li>
    <p>specifying available media players (e.g., the native MediaPlayer).</p>
  </li><li>
    <p>creating and preparing <a href="javadoc/octoshape/osa2/StreamPlayer.html"><code>StreamPlayer</code></a> objects for
					each stream.</p>
  </li><li>
    <p>requesting playback for a <a href="javadoc/octoshape/osa2/StreamPlayer.html"><code>StreamPlayer</code></a>, returning the 
				media URL for the requested stream.</p>
  </li>
</ul><p>
				In the following each of these steps will be more thoroughly
				explained. The complete examples using both the native Android 
				mediaframework and using Flash are found in 
				<a href="../../reference_players/">Reference Players</a>.
</p>

<h3 id="android-octoshapesystem">3.1. Creating and configuring <a href="javadoc/octoshape/osa2/android/OctoshapeSystem.html"><code>OctoshapeSystem</code></a></h3>
<p>
					The
					<a href="javadoc/octoshape/osa2/android/OctoshapeSystem.html"><code>OctoshapeSystem</code></a>
					class serves as an 'entry-point' for the Octoshape service/client and
					there must only exist one instance of <a href="javadoc/octoshape/osa2/android/OctoshapeSystem.html"><code>OctoshapeSystem</code></a>. 
					When openend, the object launches the Octoshape service, which starts the Octoshape client.
					Instances are created using the <a href="javadoc/octoshape/android/client/OctoStatic.html"><code>OctoStatic</code></a> class.
					When the application closes the <a href="javadoc/octoshape/android/client/OctoStatic.html"><code>OctoStatic.close(Runnable r)</code></a> must be called.
					This unbinds the service, freeing memory and terminates established socket connections. 
</p>
<p><a href="javadoc/octoshape/osa2/android/OctoshapeSystem.html"><code>OctoshapeSystem</code></a>
					is created with the reference to a
					<a href="javadoc/octoshape/osa2/ProblemListener"><code>ProblemListener</code></a>
					and a
					<a href="javadoc/octoshape/osa2/OctoshapePortListener.html.html"><code>OctoshapePortListener</code></a>
					. The
					<a href="javadoc/octoshape/osa2/ProblemListener"><code>ProblemListener</code></a>
					reports problems for Octoshape
					service and the Octoshape client (see section <a href="#android-errorhandling">handling errors</a>).
					The <a href="javadoc/octoshape/osa2/OctoshapePortListener.html.html"><code>OctoshapePortListener</code></a>
					receives a callback once the Octoshape client has successfully launched and bound to localhost, providing the bound port number.
</p><p>
					Next, the available media players are specified by invoking:
</p><pre>
public void addPlayerNameAndVersion(final String mediaPlayerId, final String mediaPlayerName, final String mediaPlayerVersion)
</pre><p>
					The different media player name are defined as constants in:
					<a href="javadoc/octoshape/osa2/android/OctoshapeSystem.html"><code>OctoshapeSystem</code></a>.
</p><p>
					Additionally, a <a href="javadoc/octoshape/osa2/listener/OctoshapeSystemListener"><code>OctoshapeSystemListener</code></a> should
					be set by <a
            href="javadoc/octoshape/osa2/android/OctoshapeSystem.html#setOctoshapeSystemListener(octoshape.osa2.listeners.OctoshapeSystemListener)">
					<code>OctoshapeSystem.setOctoshapeSystemListener(OctoshapeSystemListener)</code></a>, providing the callback when a connection to the Octoshape client
					is established.
</p><p>
					As a last step 
					 <a href="javadoc/octoshape/osa2/android/OctoshapeSystem.html#open()"><code>OctoshapeSystem.open()</code></a>
					is called, launching the <a href="javadoc/octoshape/osa2/android/OctoshapeSystem.html"><code>OctoshapeSystem</code></a>
					(starting the Octoshape service and client), which will trigger the
					callback for the <a href="javadoc/octoshape/osa2/listener/OctoshapeSystemListener.html"><code>OctoshapeSystemListener</code></a>
					indicating that service and client has successfully been launched and streaming can start.
					
</p>
<p>Having the Octoshape client bound 
				to a known port on localhost allows for requesting
				media using direct HTTP GET requests. This way playback can be 
				achieved within the app itself or using external players 
				(e.g., a webbrowser).
				Please see the <a href="../../reference_players/OctoServicePlayer/">
				OctoServicePlayer</a>, for details.  
</p>
<p class="marginal-note" id="android-codelisting1">Code Listing 1: Creating and configuring
		<a href="javadoc/octoshape/osa2/android/OctoshapeSystem.html"><code>OctoshapeSystem</code></a></p>
<pre>
/**
 * Creating OctoshapeSystem, adding ProblemListener for which we set to the
 * language of the OS and setting OctoshapePortListener triggering a
 * callback once the Octoshape service/client has started successfully.
 */
public void initOctoshapeSystem() {

  ProblemListener problemListener = new ProblemListener() {
    @Override
    public void gotProblem(Problem p) {
      Log.e(LOGTAG, p.getMessage() + " " + p.toString());
    }
  };
  // Create OctoshapeSystem
  os = OctoStatic.create(this, problemListener,
      new OctoshapePortListener() {
        // called once the Octoshape service/client has started.
        @Override
        public void onPortBound(int port) {
          boundPort=port;
        }
      });
  // Adding AndroidMediaPlayer
  os.addPlayerNameAndVersion(OctoshapeSystem.MEDIA_PLAYER_NATIVE, OctoshapeSystem.MEDIA_PLAYER_NATIVE,
      "" + Build.VERSION.SDK_INT);
  
  os.setOctoshapeSystemListener(new OctoshapeSystemListener() {
	@Override
	public void onConnect(String id) {
	  authID=id;
	  Log.d(LOGTAG, "Connection to Octoshape client established");
	}
  });
  // Launching OctoshapeSystem
  os.open();
}
</pre><p>
 				When the the appication is closed (e.g, onDestroy() is called), the 
 				<a href="javadoc/octoshape/osa2/android/OctoshapeSystem.html"><code>OctoshapeSystem</code></a>
 				has to be closed by invoking  
 			
 			
</p>

<h3 id="android-preparestreams">3.2. Prepare your streams by setting up a number of <a href="javadoc/octoshape/osa2/StreamPlayer.html"><code>StreamPlayer</code></a> instances</h3>
<p>
					Streams are prepresented by the <a href="javadoc/octoshape/osa2/StreamPlayer.html"><code>StreamPlayer</code></a> class. So 
					for every stream (octolink) an instance is to be created (see below example). 
					As a minimum a <a href="javadoc/octoshape/osa2/listeners/StreamPlayerListener.html"><code>StreamPlayerListener</code></a> has to be registered for each
					<a href="javadoc/octoshape/osa2/StreamPlayer.html"><code>StreamPlayer</code></a>, as it provides the media URL trough a callback. It is generally recommended
					to initalize <a href="javadoc/octoshape/osa2/StreamPlayer.html"><code>StreamPlayer</code></a> objects prior to playback, as it reduces the
					playback start-up time. For details please refer to the API documentation for additional listeners for the
					<a href="javadoc/octoshape/osa2/StreamPlayer.html"><code>StreamPlayer</code></a>
					.
</p><p>
					In the code listing below is an example function, setting up and
					initializing one
					<a href="javadoc/octoshape/osa2/StreamPlayer.html"><code>StreamPlayer</code></a>
					at a time. The returned and initialized
					<a href="javadoc/octoshape/osa2/StreamPlayer.html"><code>StreamPlayer</code></a>
					object, is ready for playback. When requesting playback,
					by invoking <a href="javadoc/octoshape/osa2/StreamPlayer.html#requestPlay()"><code>StreamPlayer.requestPlay()</code></a>, 
					a <a
            href="javadoc/octoshape/osa2/android/listeners/StreamPlayerListener.html#gotUrl(java.lang.String, long, boolean, octoshape.osa2.android.listeners.MediaPlayerListener)"><code>StreamPlayerListener.gotUrl(URL, seekOffset, mediaPlayerListener)</code></a> 
					callback is received providing the URL to the MediaPlayer (in this example <code>playStream(Uri mediaUrl, final String playerId)</code>).
</p><p>
					When done playing the <a href="javadoc/octoshape/osa2/StreamPlayer.html"><code>StreamPlayer</code></a> instance should always be closed
					by calling <a href="javadoc/octoshape/osa2/StreamPlayer.html"><code>StreamPlayer.close(Runnable r)</code></a>.
</p>
<p class="marginal-note" id="android-codelisting2">
	Code Listing 2: Preparing Streams and
	<a href="javadoc/octoshape/osa2/StreamPlayer.html"><code>StreamPlayers</code></a>.
</p><pre>
/**
 * Adding a stream to the OctoMediaPlayer. Creates an StreamPlayer the
 * StreamPlayer instance is initiated with a UrlListener and
 * ProblemListener.
 *
 * @param stream
 *            link (e.g., octoshape://ond.octoshape.com/demo/ios/bbb.mp4)
 * @return StreamPlayer on which we can request playback.
 */
public StreamPlayer setupStream(final String stream) {

  Log.d(LOGTAG, "Setting up stream: " + stream);
  StreamPlayer sp = os.createStreamPlayer(stream);
  sp.setListener(new StreamPlayerListener() {
    private String playerId;

    /**
     * Receiving new URL from the streamplayer instance MUST always trigger
     * playback of the provided URL. 
     *
     * @param url
     *            to be passed to the media player
     * @param seekOffset
     *            offset we have seek to in milliseconds
     * @param mediaplayerListener
     *            interface used for signaling when playback has begun and is complete 
     */
    @Override
    public void gotUrl(String url, long seekOffset, MediaPlayerListener mpl) {
        playStream(Uri.parse(url), playerId, mpl);
    }

    /**
     * Resets an on-demand file duration previously reported in
     * resolvedOsaSeek(..) method
     */
    @Override
    public void gotNewOnDemandStreamDuration(long duration) {
      // TODO:
    }

    /**
     * Called if the stream is seekable using the media player's own
     * native seeking functionality (e.g., the Android MediaPlayer does
     * the seeking for us).
     */
    @Override
    public void resolvedNativeSeek(boolean isLive, String playerId) {
      this.playerId = playerId;
    }

    /**
     * Called if it is not possible to seek in the stream.
     */
    @Override
    public void resolvedNoSeek(boolean isLive, String playerId) {
      this.playerId = playerId;
    }

    @Override
    /**
     * Called when stream support OsaSeek / DVR
     */
    public void resolvedOsaSeek(boolean isLive, long duration,
        String playerId) {
      this.playerId = playerId;
    }
  });
  sp.setProblemListener(problemListener);
  sp.initialize(false);
  return sp;
}
</pre><p>
					As this example only uses one stream we can change the
					<code>onConnect(String id)</code>
					callback in code listing 1 to:
</p><pre>
@Override
public void onConnect(String id) {
	authID=id;
	Log.d(LOGTAG, "Connection to Octoshape client established");
	mStreamPlayer = setupStream(OCTOLINK).requestPlay();
}
</pre>

<h3 id="android--390208488-0">3.3. Requesting playback and receiving URLs through callbacks</h3>
<p>
					Having set up (and optional initialized) a number <a href="javadoc/octoshape/osa2/StreamPlayer.html"><code>StreamPlayer</code></a>
					, allows requesting playback by invoking <code>.requestPlay()</code>.
</p><p>
					Calling the <code>.requestPlay()</code> triggers the <code>gotUrl</code> callback
					in the correspoding <a href="javadoc/octoshape/osa2/StreamPlayerListener.html"><code>StreamPlayerListener</code></a> 
					(see code listing 2), providing the media URL together with a <a href="javadoc/octoshape/osa2/android/listener/MediaPlayerListener.html"><code>MediaPlayerListener</code></a> instance.
					<em>Receiving a new URL MUST always trigger playback of the new URL.</em> 
</p><div class="remark">
<p><b>Remark</b></p>
<p><em>Important:</em> The application should at any
					time be prepared to handle callbacks yielding new media URLs, and MUST play these immediately.
					If new URLs are not handled accordingly, playback may terminate. 
					Moreover, before starting playback with a new URL, the media player instance has to be reset.
</p>
</div><div class="remark">
<p><b>Remark</b></p>
<p><em>Important:</em> The <a href="javadoc/octoshape/osa2/android/MediaPlayerListener.html"><code>MediaPlayerListener</code></a> instance 
						received from the <code>gotUrl(..)</code> MUST be used to signal when playback has begun and completed, by invoking: 
						
						<a
            href="javadoc/octoshape/osa2/android/listeners/MediaPlayerListener.html#onMediaPlaybackStarted()"><code>onMediaPlaybackStarted()</code></a> and
						<a
            href="javadoc/octoshape/osa2/android/listeners/MediaPlayerListener.html#onMediaPlaybackCompleted()"><code>onMediaPlaybackCompleted()</code></a>.
						
						Calling these may trigger callback providing new URLs. 
</p>
</div>

<h3 id="android-android_playback">3.4. Playing an URL using the Android MediaPlayer</h3>
<p>
				The following shows a simple function playing a media URL. Notice the 
				<a
            href="http://developer.android.com/reference/android/media/MediaPlayer.OnCompletionListener.html"><code>onCompletionListener</code></a> invoking: 
				<a
            href="javadoc/octoshape/osa2/android/listeners/MediaPlayerListener.html#onMediaPlaybackCompleted()">
				<code>onMediaPlaybackCompleted()</code></a>.
				Android provides two mechanisms for detecting when playback has has started: 
				1) the <a
            href="http://developer.android.com/reference/android/media/MediaPlayer.OnPreparedListener.html">
				<code>OnPreparedListener</code></a> and 2) the <a
            href="http://developer.android.com/reference/android/media/MediaPlayer.html#MEDIA_INFO_VIDEO_RENDERING_START">
				<code>MediaPlayer.MEDIA_INFO_VIDEO_RENDERING_START</code></a> info event provided by an 
				<a
            href="http://developer.android.com/reference/android/media/MediaPlayer.OnInfoListener.html"><code>OnInfoListener</code></a>. 
				Here 2) requires JellyBean MR1  (4.2 - API level 17) and should be used if the given API level is available as it is much more accurate than 1).
</p>
<p class="marginal-note" id="android-codelisting3">Code Listing 3: Playback with the
Android MediaPlayer</p>
<pre>
/**
 * Setting up and playing a received media URL 
 *
 * @param mediaUrl URL which needs to be passed to a media player
 * @param playerId the id of the media player which should be used to play the media Url
 */
protected void playStream(Uri mediaUrl, final String playerId, final MediaPlayerListener mplistener) {
 
  Log.d(LOGTAG, playerId + " now plays: " + mediaUrl);
  mMediaPlayer = new MediaPlayer();
  try {
    mMediaPlayer.setDisplay(mHolder);
    mMediaPlayer.setDataSource(this, mediaUrl);
    mMediaPlayer.setOnVideoSizeChangedListener(this);
    
    if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.JELLY_BEAN_MR1)
      mMediaPlayer.setOnInfoListener(new OnInfoListener() {
        @Override
        public boolean onInfo(MediaPlayer mp, int what, int extra) {
          if (MediaPlayer.MEDIA_INFO_VIDEO_RENDERING_START == what) {
            Log.d("MediaPlayer", "START RENDERING");
            mpl.onMediaPlaybackStarted();
          }
          return false;
        }
      });
    
    if (android.os.Build.VERSION.SDK_INT &lt; android.os.Build.VERSION_CODES.JELLY_BEAN_MR1)
      mMediaPlayer.setOnPreparedListener(new OnPreparedListener() {
        @Override
        public void onPrepared(MediaPlayer mp) {
          Log.d("MediaPlayer", "PLAYERBACK STARTED");
          mpl.onMediaPlaybackStarted();
        }
      });
    
    mMediaPlayer.setOnPreparedListener(new OnPreparedListener() {
	  @Override
	  public void onPrepared(MediaPlayer mp) {
	    mplistener.onMediaPlayerPrepared();
	    Log.d("MediaPlayer", "PLAYER READY");
	  }
	});
    
    mMediaPlayer.setOnErrorListener(new OnErrorListener() {
      @Override
      public boolean onError(MediaPlayer mp, int what, int extra) {
        error("MediaPlayer Error: " + what + ":" + extra);
        return true;
      }
    });
    mMediaPlayer.prepare();
    mMediaPlayer.start();
  } catch (Exception e) {
    Log.e(LOGTAG, "Error preparing MediaPlayer", e);
    error("Error preparing MediaPlayer: " + e.getMessage());
  }
}
</pre><p>
				This conclude the section and the reference application using the
				native Android MediaPlayer. For the full code listing please see
				<a href="../../reference_players/OctoAndroidPlayer">
				OctoAndroidPlayer</a> in the SDK package. For the same player
				using a Adobe Flash Player for media playback, please refer to 
				<a href="../../reference_players/OctoFlashPlayer">
				OctoFlashPlayer</a> project.
							
				Moreover the SDK package also contains a 
				<a href="../../reference_players/OctoDemoPlayer">complete player
				</a>, including most features (e.g., seeking, DVR, etc.), 
				using the native Android media player.
</p>

<h3 id="android-errorhandling">3.5. Handling errors</h3>
<p>Errors are representated by the 
				    <a href="javadoc/index.html?octoshape/osa2/Problem.html">Problem</a> class, received by 
				 	a <a href="javadoc/octoshape/osa2/listeners/ProblemListener.html"><code>ProblemListener</code></a> 
				 	reporting problems regarding the <a href="javadoc/octoshape/osa2/android/OctoshapeSystem.html"><code>OctoshapeSystem</code></a> 
				 	or for a <a href="javadoc/octoshape/osa2/StreamPlayer.html"><code>StreamPlayer</code></a> instance.
</p>
<p>Received <a href="javadoc/octoshape/osa2/Problem.html"><code>Problem</code></a> instances should always trigger a UI message to the user if such a message is available 
					(see <a href="javadoc/index.html?octoshape/osa2/Problem.html#getMessage()"><code>Problem.html#getMessage()</code></a>).
					Below a simple example implememtation of a <code>ProblemListeners</code>. Here all <code>Problems</code> are logged 
					to console and those containing a user message are displayed in a small popup via a <code>Toast</code>. 
</p><pre>
ProblemListener problemListener = new ProblemListener() {
  @Override
  public void gotProblem(Problem p) {
    Log.e(LOGTAG, "Problem: "+p.toString());
    if(p.getMessage()!=null){
      runOnUiThread(new Runnable() {
        @Override
        public void run() {
          Toast toast = Toast.makeText(MiniAndroidPlayer.this, error,Toast.LENGTH_LONG);
          toast.show();
        }
      });
    }
  }
};				
</pre>
<p>The implementation of <code>.getMessage()</code> is documented in detail in 
			<a href="javadoc/index.html?octoshape/osa2/Problem.html#getMessage()">java docs</a>.
			If an alternate language that English is requried, please implement a customized variant of <code>getMessage()</code>. 		
			
</p>

<h4 id="android--572716223-0">3.5.1. Handling MediaPlayer Errors</h4>
<p>When errors are reported by the media framework, we propose the
				creation of <a href="javadoc/octoshape/osa2/Problem.html"><code>Problem</code></a> 
				instances, passing information received by the 
				<a
            href="http://developer.android.com/reference/android/media/MediaPlayer.OnErrorListener.html#onError(android.media.MediaPlayer, int, int)"><code>OnErrorListener.onError(MediaPlayer mp, int what, int extra)</code></a> callback.
				Existing <a href="javadoc/octoshape/osa2/Problem.html"><code>Problem</code></a> instances can then be dispatched trough
				the previously defined <a href="javadoc/octoshape/osa2/listeners/ProblemListener.html"><code>ProblemListener</code></a>.
</p><pre>
mMediaPlayer.setOnErrorListener(new OnErrorListener() {
				
  @Override
  public boolean onError(MediaPlayer mp, int what, int extra) {
    problemListener.gotProblem(OctoStatic.generateMediaPlayerProblem(what, extra));
	return false;
  }
});				
</pre>

<h3 id="android-multiple_players">3.6. Supporting multiple players</h3>
<p>
				This SDK currently supports both the native Android MediaPlayer, the Adobe FlashPlayer 
				and the Vitamio plugin. The delivered media data is fully compliant with these players. 
				When preparing <a href="javadoc/octoshape/osa2/android/OctoshapeSystem.html"><code>OctoshapeSystem</code></a> available media players are added to the
				by invoking:
</p><pre>
public void addPlayerNameAndVersion(final String mediaPlayerId, final String mediaPlayerName, 
									final String mediaPlayerVersion) 
</pre><p>
				Devices running Honeycomb (Android 3.x) or older require for live video either a FlashPlayer or the Vitamio plugin.  
				The <code>mediaPlayerVersion</code> is important and needs to be set for every player. The following example
				illustrates for to determine both the Android OS and installed Flash Player version and adding these to 
				<a href="javadoc/octoshape/osa2/android/OctoshapeSystem.html"><code>OctoshapeSystem</code></a>.
</p>
<p class="marginal-note" id="android-codelisting5">Code Listing 5: Defining multiple media
	players</p>
<pre>
// Try adding FlashPlayer
try {
  String flashVersion = this.getPackageManager().getPackageInfo(
      "com.adobe.flashplayer", 0).versionName;
  Log.d("OCTOPLAYER", "Flash is installed (version: " + flashVersion + ")");
  os.addPlayerNameAndVersion(OctoshapeSystem.MEDIA_PLAYER_FLASH,"Adobe Flash Player", "" + flashVersion);
} catch (NameNotFoundException e) {
  // flashplayer is disabled, warn user if running on Honeycomb (Android 3.x) or older
}

// Adding Android MediaPlayer
os.addPlayerNameAndVersion(OctoshapeSystem.MEDIA_PLAYER_NATIVE, "Android Media Player",
    "" + Build.VERSION.SDK_INT);
// Launching OctoshapeSystem
os.open();
</pre>

<h4 id="android-1243832602-0">3.6.1. Selecting a player</h4>
<p>
					Prior to receiving a media URL ( by
					<code>gotUrl(...)</code> ) one of the <code>resolved...</code>
					callback in the <a href="javadoc/octoshape/osa2/StreamPlayerListener.html"><code>StreamPlayerListener</code></a>
					(see code listing <a href="#android-codelisting2">2</a>) is triggered, providing
					information about seek method and suitable media player. If no suitable player was found, a 
					corresponding <a href="javadoc/octoshape/osa2/Problem.html"><code>Problem</code></a>
					is received.
</p><p>
					The
					<code>resolved...</code>
					callback are received prior to the <code>gotUrl</code> callback, after playback was requested 
					Receiving the <code>resolved...</code> callback earlier, requires initializing the stream by invoking 
					<a href="javadoc/octoshape/osa2/StreamPlayer.html#initialize(boolean)">
					<code>StreamPlayer.initialize(true)</code></a>.
</p>
<h5 id="android--688059772-0">3.6.1.1. Playback using the Android MediaPlayer</h5>
<p>
						This is illustrated in <a href="#android-android_playback">code listing 3</a>. 
						For a full code listing please refer to the 
						<a href="../../reference_players/OctoAndroidPlayer">
						OctoAndroidPlayer</a> in the SDK package.
</p>

<h4 id="android--2125143792-0">3.6.2. Playback using the Adobe FlashPlayer</h4>
<p>	Adding the Adobe Flash Player in an Android application can easily be achieved by creating a <code>WebView</code>
					and opening a page embedding the swf file. Interfacing between Flash and Android Java can easily be acommplished 
					by the use of java script.</p>
<p>
					For convinience this SDK already includes a MediaPlayer (androidplayer.swf) and html document (player.html) as part of the asset file.
					An example JavaScript API in shown in <a href="#android_appendixes-appendix_1">Appendix I</a>.
					The Octoshape Client (see <a href="#android-architecture">figure 1</a>) launches a webserver, and publishes these two files by default.
					The webserver binds on <code>127.0.0.1:<em>port</em></code>, where the port is given by the <code>onPortBound(int port)</code>calback in  
					<a href="javadoc/octoshape/osa2/OctoshapePortListener.html.html"><code>OctoshapePortListener</code></a>. For the complete example 
					please see the <a href="../../reference_players/OctoFlashPlayer">
					OctoFlashPlayer</a> in the SDK package.
</p>

<h3 id="android-seeking">3.7. Seeking for on-demand streaming</h3>
<p>Prior to receiving a media URL ( by
					<code>gotUrl(...)</code> ) one of the <code>resolved...</code>
					callbacks in the <a href="javadoc/octoshape/osa2/StreamPlayerListener.html"><code>StreamPlayerListener</code></a>
					(see code listing <a href="#android-codelisting2">2</a>) is triggered, providing information about the available seek method.
				There exist three types of seeking, each explained in the following:</p>
<dl>
  <dt>No seek</dt>
  <dd>
    <p><code>resolvedNoSeek(boolean isLive, String playerId)</code> was called.</p>
    <p>
				Seeking is not available.
    </p></dd>
  <dt>Native seek</dt>
  <dd>
    <p><code>resolvedNativeSeek(boolean isLive, String playerId)</code> was called.</p>
    <p>
				Seeking is initiated through a native player (e.g., Android MediaPlayer). The duration and current position information 
				is directly retrieved from the media player (required for setup seeking UI).
    </p></dd>
  <dt>Octoshape seek.</dt>
  <dd>
    <p><code>resolvedOsaSeek(boolean isLive, long duration, String playerId)</code> was called.</p>
    <p>
				Seeking is initiated by invoking <a
            href="javadoc/octoshape/osa2/StreamPlayer.html#requestPlayOndemandPermilPosition(int)"><code>StreamPlayer.requestPlayOndemandPermilPosition(int)</code></a>
				This triggers a <code>gotUrl(...)</code> callback, providing the a new URL and a <code>seekOffset</code>.
				The duration is provdided through the <code>resolvedOsaSeek(..)</code> callback.
    </p><div class="remark">
    <p><b>Remark</b></p>
    <p>Computation of the current position is dependend on the media player and android version.</p>
    <dl>
      <dt>Flashplayer:</dt>
      <dd>
        <p>computed by <code>MediaPlauer.getPosition()</code> + <code>seekOffset</code>.</p>
      </dd>
      <dt>Native Android 4.4.2 and below:</dt>
      <dd>
        <p>computed by <code>MediaPlauer.getPosition()</code> + <code>seekOffset</code>.</p>
      </dd>
      <dt>Native Android 4.4.3 and above:</dt>
      <dd>
        <p>uses the PTS (Presentation Time Stamp) values in the transport stream to determine playback in the stream, so the position soley determined by <code>MediaPlauer.getPosition()</code>.</p>
      </dd>
    </dl>
    </div></dd>
</dl><p>
			For further details please refer to the javadoc of <a href="javadoc/octoshape/osa2/listeners/StreamPlayerListener.html"><code>StreamPlayerListener</code></a>.
</p>

<h3 id="android-dvr">3.8. DVR for live streaming</h3>
<p>
				DVR is configured by a maximum latency defined in milliseconds. If a stream is DVR enabled, 
				a <a
            href="javadoc/octoshape/osa2/listeners/StreamPlayerListener.html#resolvedOsaSeek(boolean, long, java.lang.String)"><code>StreamPlayerListener.resolvedOsaSeek(isLive, duration, playerId)</code></a>
				callback is received with <code>isLive</code> being <code>true</code> and <code>duration</code> 
				corresponding to the maximum configured latency (see below example).
</p><pre>
 ...
 @Override
 /**
  * Called when stream support OsaSeek / DVR
  */
 public void resolvedOsaSeek(boolean isLive, long duration,
     String playerId) {
   this.playerId = playerId;
   if(isLive &amp;&amp; duration &gt; 0 )
     // DVR  for live available
   else if(isLive)
   	 // DVR is not available
   else
     // Use OSA seek for on-demand
 }
 ...
</pre><p>
				DVR is initiated invoking the <a
            href="javadoc/octoshape/osa2/StreamPlayer.html#requestPlayLiveWithLatency(long)"><code>StreamPlayer.html#requestPlayLiveWithLatency(latency)</code></a> method
</p><pre>
sp.requestPlayLiveWithLatency(latency);
</pre><div class="remark">
<p><b>Remark</b></p>
<p>
	It is required to stop the MediaPlayer playback prior to invoking <a
            href="javadoc/octoshape/osa2/StreamPlayer.html#requestPlayLiveWithLatency(long)"><code>StreamPlayer.html#requestPlayLiveWithLatency(latency)</code></a>
</p>
</div>

<h2 id="android-691088623-0">4. Enabling remote playback using ChromeCast/Airplay</h2>
<p>Enabling ChromeCast/AirPlay capability requires setting an explicit option 
			on the <code>StreamPlayer</code> instance prior to invoking <code>initialize()</code> or any <code>play()</code> method
			by invoking:</p>
<pre>mStreamPlayer.setOctolinkOption("airplay", "true");</pre>
<p>When using ChromeCast and the application is terminated, playback is stopped as the application no longer can serve media data to the used Chromecast device.</p>
<p>The SDK contains a chromecast sample application requiring the following libraries:</p>
<ul>
  <li>
    <p>android-support-v7-appcompat which can be found at:
				<tt><i>SDK_install_location</i>/extras/android/support/v7/appcompat</tt></p>
  </li><li>
    <p>android-support-v7-mediarouter which can be found at:
				<tt><i>SDK_install_location</i>/extras/android/support/v7/mediarouter</tt></p>
  </li><li>
    <p>google-play-services_lib which can be found at:
 				<tt><i>SDK_install_location</i>/extras/google/google_play_services/libproject/google-play-services_lib</tt></p>
  </li>
</ul>

<h2 id="android--1944429384-0">5. Ticket Restriction</h2>

<h3 id="ticket-system-top">5.1. Octoshape ticket system</h3>

<h4 id="ticket-system-1703914554-1">5.1.1. Introduction</h4>
<p>
			Using the Octoshape ticket system, broadcasters can restrict access 
			to their Octoshape streams. The most common use case is to
			allow only registered or paying users to watch the stream.
</p><p>
			The ticket system works by enabling a password/shared secret for the stream in 
			the Octoshape streaming servers. The password is known by both the broadcaster
			and Octoshape. A player/application attempting to play the protected stream, must
			present a valid ticket. Such a ticket can only be generated by knowing the password
			of the stream.
</p><p>
			There are 4 components involved in the ticket system:
</p><dl>
  <dt>The player application</dt>
  <dd><p>	
				The player or app - implemented by the broadcaster - which is using the Octoshape client or SDK for stream playback.
    </p></dd>
  <dt>The Octoshape client/SDK</dt>
  <dd><p>
				Provides APIs to the player application, to pass stream play requests, and tickets for authentication. 
    </p></dd>
  <dt>The ticket issuer</dt>
  <dd><p>
				A broadcaster-controlled component that "knows" the password and can issue valid tickets for the stream.
				Usually the ticket issuer will be a special web-application that validates user information
				(login, payment etc.) against some database before issuing tickets.
    </p></dd>
  <dt>The Octoshape streaming servers</dt>
  <dd><p>
				The Octoshape back-end streaming servers which serve stream data and validates tickets to allow/disallow access.
    </p></dd>
</dl>
<p></p>

<h4 id="ticket-system-1291314724-0">5.1.2. Octoshape stream configuration</h4>
<p>
			Contact Octoshape support to have ticket-authentication enabled. Octoshape support will provide the password used to protect the streams, so the ticket issuer can be properly configured.   
</p>

<h4 id="ticket-system-493783037-0">5.1.3. Issuing tickets</h4>
<p>
			To play a ticket restricted stream the player application must provide 
			a valid ticket to the Octoshape client (which in turn validates it with the Octoshape servers). A valid ticket consists of two parts, which are passed to the Octoshape client as strings:
</p><ol>
  <li>
    <p><a href="#ticket-system-authInfo">authInfo</a>: A comma-separated list of options that restricts the ticket in various ways</p>
  </li><li>
    <p><a href="#ticket-system-authHash">authHash</a>: A hash of the combined string of options, as well as the stream password and optionally a unique Octoshape client session ID</p>
  </li>
</ol>
<p>A correct <tt>authhash</tt> value must matches the options set in <tt>authinfo</tt></p>
<h5 id="ticket-system-authID">5.1.3.1. The authID</h5>
<p>
				For additional security, all Octoshape clients generate an "authID" upon
				every launch. 
				This ID is changed every time the Octoshape client re-launches and is 
				considered to be unique for every client. 
				The player application can obtain this id through the same API used for playing streams.
</p><p>
				Per default, the <tt>authid</tt> is used to validate the <tt>authhash</tt> string.
				This ensures that one Octoshape user, cannot
				share the ticket with another Octoshape user, as they will have different
				authids and thus require different authhashes to play the stream
				
				The ticket issuer may choose to disable this feature by setting a special option.
				See the <a href="#ticket-system-useauthid">useauthid</a> option.
</p>
<p></p>
<p>
				The authID is a string of ASCII characters from the closed interval 32 to 126. 
				Thus it could be e.g. "-1754182638" or "147966193".
</p>
<h5 id="ticket-system-authInfo">5.1.3.2. Setting options (the authInfo)</h5>
<p>
				Various options can be set by the ticket issuer to affect the security level and scope of a ticket. 
</p><dl>
  <dt id="ticket-system-algo">algo</dt>
  <dd>
    <p>This option specifies which hash algorithm was used to compute the <tt>authhash</tt>.
			It takes an integer value that corresponds with one of the supported algorithms:</p>
    <ol>
      <li>
        <p>MD5</p>
      </li><li>
        <p>HMAC-MD5</p>
      </li><li>
        <p>SHA256</p>
      </li><li>
        <p>HMAC-SHA256</p>
      </li>
    </ol>
    <p><b>Note:</b> Plain MD5 is assumed if this value is not set, however it is recommended to explicitly set the correct algo-value e.g. <tt>algo=4</tt></p>
  </dd>
  <dt id="ticket-system-hardexpire">hardexpire</dt>
  <dd>
    <p>This option specifies a time by which the ticket should expire and 
				streaming should be discontinued. The time is given as a number 
			 	of UT1 milliseconds since 00:00 UTC on January 1st 1970. This is commonly 
			 	referred to as a UNIX timestamp.</p>
    <p>E.g. to set hardexpire for Jan 1st 2020 (00:00) set <tt>hardexpire=1577836800000</tt></p>
  </dd>
  <dt id="ticket-system-useauthid">useauthid</dt>
  <dd>
    <p>This option defaults to true so there is no need to include it if setting 
				it to true. But if set to "false" the authid and the trailing "," (comma) will 
				not be used to generate the hash. This offers a simpler but less secure 
				ticketing system as the tickets can be (re)used by any Octoshape client and
				will be restricted only by any additional options that may be set (such as 
				<tt>hardexpire</tt> or <tt>unique</tt> )
    </p></dd>
  <dt id="ticket-system-filter">filter</dt>
  <dd><p>
				This option is used to limit the ticket to a specific stream or stream prefix.
				If the value of the filter option ends with a '/' the ticket will be valid for all streams
				that has this string as a prefix. If it does not end in a '/', it is interpreted as
				a single specific stream name.
    </p><p>
				The stream name is the unique string identifying the stream in the Octoshape system, 
				without the leading protocol and complex of the octolink, 
				i.e. the stream name of the octolink 
				<code>octoshape://streams.octoshape.net/MyCustomerId/live/mystream</code>
				is <code>MyCustomerId/live/mystream</code>.
    </p></dd>
  <dt id="ticket-system-unique">unique</dt>
  <dd>
    <p>This option allows the ticket issuer to specify a unique string that can be 
				used by the Octoshape servers to allow/disallow access in a number of ways.
				The most common use is to allow only one user to watch at a time with a 
				unique string. This prevents e.g. multiple persons from logging in and 
				accessing content using the same account.
    </p></dd>
  <dt id="ticket-system-user">user</dt>
  <dd>
    <p>This can be set to some id identifying the user. Is currently only used 
				by the Octoshape servers and only in log files
    </p></dd>
</dl><p>
				A set of options are given as a comma separated list of key-values; Some 
				Octoshape APIs call this list the "authInfo" sting. 
				It is used both as a component of the <a href="#ticket-system-authHash">authHash</a>
				string, but is also the other, un-hashed, part of a ticket.
</p>
<h5 id="ticket-system-authHash">5.1.3.3. Hash calculation</h5>
<p>To authenticate against a stream, the ticket issuing component must compute and present a correct <tt>authhash</tt>.
		This is done by hashing the password (that Octoshape has configured the protected streams with) with the optional <tt>authid</tt> and the <tt>authinfo</tt> options.</p>
<p>The Octoshape token system supports both MD5 and SHA256 in regular or HMAC mode.</p>
<p>Most programming languages/libraries provide built-in methods for one or more of these algorithms.</p>
<p>Below we provide some examples to illustrate the proper generation of <tt>authhash</tt> using different algorithms. The fifth example illustrates a ticket that has multiple options set.
		For each of these assume that the password is <tt>Skonmerk</tt>, the authid is <tt>845406748</tt>, and authinfo only contains the <tt>algo</tt> option. These values can be used to test if an implementation generates the correct output.</p>
<h6 id="ticket-system-authhashmd5">5.1.3.3.1. Algo 1 - MD5</h6>
<p>For plain MD5 the concatenated string [password],[authid],[algo] is hashed, e.g. in pseudo-code:</p>
<pre>authhash = md5('Skonmerk,845406748,algo=1')</pre>
<p>Which then gives:</p>
<p><b>authinfo:</b></p>
<pre>algo=1</pre>
<p><b>authhash:</b></p>
<pre>afc7c1f3d2584bc79caa9ce19a4e9f2f</pre>
<h6 id="ticket-system-authhashhmacmd5">5.1.3.3.2. Algo 2 - HMAC-MD5</h6>
<p>For HMAC-MD5, use the password as <em>key</em> and the full concatenated string (including the password) as the <em>message</em>. E.g. in pseudo-code:</p>
<pre>authhash = hmac-md5('Skonmerk', 'Skonmerk,845406748,algo=2')</pre>
<p>which gives:</p>
<p><b>authinfo:</b></p>
<pre>algo=2</pre>
<p><b>authhash:</b></p>
<pre>8e3bfbf870151b4c1b37d293572542ae</pre>
<h6 id="ticket-system-authhashsha256">5.1.3.3.3. Algo 3 - SHA256</h6>
<p>For plain SHA256 the concatenated string [password],[authid],[algo] is hashed, e.g. in pseudo-code:</p>
<pre>authhash = sha256('Skonmerk,845406748,algo=3')</pre>
<p>Which then gives:</p>
<p><b>authinfo:</b></p>
<pre>algo=3</pre>
<p><b>authhash:</b></p>
<pre>94b513cadd3216675920a1eb944f68b2b656c73fa683f2821ad0a6260853c08c</pre>
<h6 id="ticket-system-authhashhmacsha256">5.1.3.3.4. Algo 4 - HMAC-SHA256</h6>
<p>For HMAC-SHA256, use the password as <em>key</em> and the full concatenated string (including the password) as the <em>message</em>. E.g. in pseudo-code:</p>
<pre>authhash = hmac-sha256('Skonmerk', 'Skonmerk,845406748,algo=4')</pre>
<p>which gives:</p>
<p><b>authinfo:</b></p>
<pre>algo=4</pre>
<p><b>authhash:</b></p>
<pre>94b6265c5d12d5e02a0059769952e040a7b5933d8851ca704ac1ea048fa4456c</pre>
<h6 id="ticket-system-authhashhmacsha256options">5.1.3.3.5. Adding extra options</h6>
<p>This example (using HMAC-SHA256) illustrates how to add additional options to the authinfo string:</p>
<pre>authhash = hmac-sha256('Skonmerk', 'Skonmerk,845406748,algo=4,hardexpire=1577836800000,unique=SomeUserName,filter=customer/live/channel1/')</pre>
<p>which gives:</p>
<p><b>authinfo:</b></p>
<pre>algo=4,hardexpire=1577836800000,unique=SomeUserName,filter=customer/live/channel1/</pre>
<p><b>authhash:</b></p>
<pre>858ca315ac036c1303de001290de78357846827a689b377da362fb7fa653a554</pre>

<h4 id="ticket-system--1610279246-0">5.1.4. Octoshape client authorization</h4>
<p> 
			When the Octoshape client receives a ticket for some stream, that ticket 
			is forwarded to the Octoshape streaming servers.
</p><p>  
			The Octoshape streaming server, who knows the ticket restriction password,
			will use the information in the ticket to calculate 
			the same hash that the ticket issuer generated.
			If these hashes match, the client will be allowed to obtain the stream. 
			If someone has attempted to manipulate the options, or if the the client is trying 
			to play a stream using a ticket that was generated for a different authID, the 
			hashes will not match and the streaming servers will deny access.
</p>

<h3 id="android-ticket">5.2. Using tickets in the Android SDK</h3>
<p>
					If a stream is ticket restricted in the Octoshape back-end system,
					the <a
            href="javadoc/octoshape/osa2/StreamPlayer.html#.setAuthorization(java.lang.String, java.lang.String)"><code>setAuthorization()</code></a> method must be called for the corresponding
					<a href="javadoc/octoshape/osa2/StreamPlayer"><a href="javadoc/octoshape/osa2/StreamPlayer.html"><code>StreamPlayer</code></a></a>,
					providing a ticket consisting of an <code>authInfo</code> and an <code>authHash</code>. 
</p><pre>
/**
 * TODO: Acquire a ticket for this stream, for instance by transferring &lt;code&gt;authid&lt;/code&gt; to
 * a web server that performs the actual validation of the user and replies with
 * a 'authHash' and 'authInfo' string.
 */

// Authorize using acquired ticket.
streamPlayer.setAuthorization(authInfo, authHash);
</pre><p>
					The computation of <code>authHash</code> may be require the <code>authId</code>, which is obtained through the 
					<a href="javadoc/octoshape/osa2/listeners/OctoshapeSystemListener"><code>OctoshapeSystemListener</code></a>, which is 
					received once Octoshape client has launched, by calling 
					<a href="javadoc/octoshape/osa2/android/OctoshapeSystem.html#open()"><code>OctoshapeSystem.open()</code></a>.
					This mechanism should in general be used to verify that the Octoshape client has started. 
</p><pre>
os.setOctoshapeSystemListener(new OctoshapeSystemListener() {
	
  @Override
  void onConnect(String id) {
    authID=id;
    runOnUiThread(new Runnable() {
      @Override
      public void run() {
        // prepare streamplayer 
      }
    });
  }
});		        
</pre>

<h2 id="android-broadcaster">6. Broadcasting live streams</h2>
<p> The following section will give a brief overview and show examples 
				of how to use this SDK for broadcasting.
</p>

<h3 id="android-1583803543-0">6.1. Configuring the client</h3>
<p>
					Using the broadcasting feature requires the adjusment to the 
					octoshape client configuration. The configuration is a XML 
					file located in the assets file named <code>setup.xml</code>.
</p><p>
					Then the following attribute needs to be added to the root node:
					<code>TrustXML="true"</code>.
</p><pre>
&lt;config LocalWebServerIpp="127.0.0.1:65535" TrustXml="true"/&gt; 
</pre><p>
					Changing the <code>setup.xml</code> the project requires a re-building
					of the project.
</p>

<h3 id="android-782927444-0">6.2. Creating and configuring <a href="javadoc/octoshape/osa2/android/OctoshapeSystem.html"><code>OctoshapeSystem</code></a></h3>
<p>
					Creating and configuring <a href="javadoc/octoshape/osa2/android/OctoshapeSystem.html"><code>OctoshapeSystem</code></a> is identical to
					media play-back. Please refer to corresponding 
					<a href="#android-octoshapesystem">section</a>.
</p>

<h3 id="android--1188379543-0">6.3. Prepare your broadcaster by setting up a number of StreamPushers</h3>
<p>
					Broadcasting streams are represented by the <a href="javadoc/octoshape/osa2/android/StreamPusher.html"><code>StreamPusher</code></a> class. 
					When instantiating a <a href="javadoc/octoshape/osa2/android/StreamPusher.html"><code>StreamPusher</code></a> the media source, 
					the octoshape link and a password have to be provided. Before 
					initatiting the broadcasting by invoking <a href="javadoc/octoshape/osa2/android/StreamPusher.html#initialize()"><code>StreamPusher.initialize()</code></a>,
					options can be set both on the octolink and the media source url.
					The options should in general not be required.
					For general information (including using these options) please refer 
					to the Broadcaster Documenation in the
					<a href="http://support.octoshape.com/forums">
					Octoshape Support Forum</a>.
</p><p>
					The below example code shows a generic function for setting up and
					initializing a number of <code>StreamPusher</code>s.
</p><pre>
private StreamPusher pushStream(String octoStreamLink, String MediaSourceUrl,
    String passwd, HashMap linkOptions, HashMap mediaOptions) {

  StreamPusher pushingStream = os.createStreamPusher(octoStreamLink,
      MediaSourceUrl, passwd);

  // setting link options
  MMapIterator it = linkOptions.iterator();
  while (it.hasNext())
    pushingStream.setOctolinkOption((String) it.nextKey(),
        (String) it.getValue());

  // setting media options
  it = mediaOptions.iterator();
  while (it.hasNext())
    pushingStream.setMediaSourceUrlOption((String) it.nextKey(),
        (String) it.getValue());

  pushingStream.initialize();
  return pushingStream;
}
</pre>

<h3 id="android--1030046564-0">6.4. Querying the status of <code>StreamPushers</code></h3>
<p>		
					The status of a <a href="javadoc/octoshape/osa2/android/StreamPusher.html"><code>StreamPusher</code></a> can be obtained providing a 
					<a href="javadoc/octoshape/osa2/android/listener/PushStatusListener.html"><code>PushStatusListener</code></a> to 
					<a
            href="javadoc/octoshape/osa2/android/StreamPusher.html#requestPushStatus(octoshape.osa2.listeners.PushStatusListener)"><code>StreamPusher.requestPushStatus(PushStatusListener)</code></a>
					You might want to periodically invoke this method. For more information
					on the returned status, please refer to the Broadcaster Documenation 
					in the<a href="http://support.octoshape.com/forums">
					Octoshape Support Forum</a>.
</p><p>
					Please also refer to the documentation of <a href="javadoc/octoshape/osa2/android/StreamPusher.html"><code>StreamPusher</code></a>and
					<a href="javadoc/octoshape/osa2/android/listener/PushStatusListener.html"><code>PushStatusListener</code></a>.
</p>

<h2 id="android-logging">7. Enable Logging</h2>
<p>The Octoshape client can generate obfuscated log files for debugging purpose.
			Logging is enabled by
				setting an attribute in the octoshape configuration file (<code>setup.xml</code>). Enabling and
				retieving these logs requires the use of the adb program (part of the
				android development tools), capable of pulling and pushing file to
				the device.</p>
<p>
				The configuration file is a XML file located in
				<code>./files/octoshape/setup.xml</code>
				where
				<code>.</code>
				referes to the path of the application (e.g.,
				<code>/data/data/com.octoshape.android.octodemoplayer/files/octoshape/setup.xml).</code>
</p><p>
				As a first step the <code>setup.xml</code> file needs to be pulled from the
				device.
</p><pre>
adb pull /data/data/com.octoshape.android.octodemoplayer/files/octoshape/setup.xml 
</pre><p>
				As a second step the following node is added the root node, 
				and the logpath is modified:
</p><pre>
&lt;log type='Normal'&gt;
    &lt;server enabled='true' useold='true'/&gt;
    &lt;console enabled='false'/&gt;
    &lt;file enabled='true' logpath='/mnt/sdcard/octoshape'/&gt;
 &lt;/log&gt;
</pre>
<p>As a third and final step, the <code>setup.xml</code> is pushed back on to the device.</p>
<pre>
adb push setup.xml /data/data/com.octoshape.android.octodemoplayer/files/octoshape/setup.xml 
</pre><p>
			If the above is not possible (due to filesystem permissions),
			the <code>setup.xml</code> is edited 
			directly on the device. First login via ADB and naviagate to the 
			relevant folder.
</p><pre>
flpi@cmpc045 ~
$ adb shell
shell@jflte:/ $ cd /data/data/com.octoshape.android.octoandroidplayer/files/octoshape/
</pre>
<p> Since the android does not come with a terminal editor, it is easiest to
		copy the edited setup.xml to the clipboard and paste it into an echo command in the terminal.
		The below example will write the output from the echo command to the <code>setup.xml</code>.
		Here please remember to replace any double quotes in the xml with single quotes.
</p><pre>
shell@jflte:/data/data/com.octoshape.android.octoandroidplayer/files/octoshape $ echo -e " paste here " &gt; setup.xml
</pre><p>
				Now the Android application needs to closed completly (force stop in the
				android settings) and restarted. Upon restart the application will
				write log files. Logging produces a significant amount of
				output and should only be enabled when instructed by Octoshape Support. 
</p>

<h2 id="android_appendixes-appendix_1">8. Appendix I: player.html used for embedding Flash</h2>
<p>
		The below html document is contained in the /wwwroot folder in the assets file, and used to communicate from Java to the Flash Player via Java Script.
</p><pre>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/&gt;
        &lt;title&gt;Octoshape Flash Player&lt;/title&gt;
        &lt;style&gt;
            body {margin:0; pading:0; background-color: black;}
            embed {width:100%; height:100%; background-color: black; margin-left:auto; margin-right:auto;}
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body style="margin:0; "&gt;
        &lt;embed src="./androidplayer.swf"
            autoplay="true"
            quality="high"
            id="flashContent"
            allowScriptAccess="always"
            allowFullScreen="true"
            type="application/x-shockwave-flash"
            pluginspage="http://www.macromedia.com/go/getflashplayer"/&gt;
        &lt;script type="text/javascript"&gt;
            var debug = false;
                            // ********** METHODS CALLED FROM ANDROID *************//
                        /*    Function called once received a media http:\ media URL.
             *    Calling start will initiate auto playback.
             */
            function start(mediaURL){
                flashContent.start(mediaURL+"?octoshapelog=debug");
            }
                        /*    Function called for stopping playback.
             *    After calling stop, playback can not be resumed.
             */
            function stop(){
                flashContent.stop();
            }
            /*    Function initiating playback when the stream is paused.
             */
            function play(){
                flashContent.play();
            }
            /*    Function pausing playback if stream is playing 
             *    ( either called by start() or play() )
             */
            function pause(){
                flashContent.pause();
            }
                        /*    Function for getting duration of the current playing stream.
             *  Calls onDuration(duration) in the Android JavaScriptInterface.
             */
            function getDuration(){
                duration = flashContent.getDuration();                 ANDROID.onDuration(duration);
            }
                        /*    Function for getting the the current playing play position.
             *  Calls onCurrent(currentPosition) in the Android JavaScriptInterface.
             */
            function getCurrentPosition(){
                ANDROID.onCurrent(flashContent.getCurrent());
            }
                        /*    Function for enabling debug flash messages .
             *  Triggers onDebug(debugStr) callbacks from Flash.
             */
            function enableDebug(isEnabled){
                debug = true;
                ANDROID.showToast('enableDebug: ' + isEnabled);
                flashContent.debug(isEnabled);
            }
            // ********** CALLBACKS FROM FLASH PLAYER  *************//
                        function onPlayerReady (){
                ANDROID.onPlayerReady();
            }
                        /*    Callback for when flash player has begun playback.
             *    Triggered by either calling start(url) or play().
             */
            function onPlay(){
                if(debug)
                    ANDROID.showToast('onPlay');
                ANDROID.onPlay();
                ANDROID.onDuration(flashContent.getDuration());
            }
                        /*    Callback for when flash player has paused.
             *    Triggered by calling pause().
             */
            function onPause(){
                if(debug)
                    ANDROID.showToast('onPause');
                ANDROID.onPause();
            }
                        /*    Callback for when flash player has paused.
             *    Triggered by calling getCurrentPosition() and is called autonomously by flash at
             *    in constant interval. The returned value is intendend to be used in a progress bar
             *    implementation.
             */
            function onCurrent(current){
                ANDROID.onCurrent(current);
            }
                        /*    Callback for when flash player has stopped.
             *    After this callback only start(url) and enableDebug(isEnabled),
             *    is intended to be invoked.
             */
            function onStop(){
                if(debug)
                    ANDROID.showToast('onStop');
                ANDROID.onStop();
            }
            /*    Callback for when flash player has completed playback.
             *    After this callback only start(url) and enableDebug(isEnabled),
             *    is intended to be invoked.
             */
            function onCompletion(){
                if(debug)
                    ANDROID.onCompletion();
            }
            /*    Callback for when an error has occured in the flash player.
             */
            function onError(errorString){
                if(debug)
                    ANDROID.showToast('onError');
                ANDROID.onError(errorString);
            }
            /*    Callback with debug information
             */
            function onDebug(debugStr){
                if(debug)
                    ANDROID.onDebug(debugStr);
            }
        &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
  </body>
</html>
